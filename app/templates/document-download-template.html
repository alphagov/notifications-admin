{% from "govuk_frontend_jinja/components/notification-banner/macro.html" import govukNotificationBanner %}

{% extends "govuk_frontend_jinja/template.html"%}

{% set cspNonce = request.csp_nonce %}

{# toggle to enable new styles for rebrand #}
{% set govukRebrand = True %}

{% block headIcons %}
  <link rel="icon" sizes="48x48" href="{{ asset_url('images/favicon.ico') }}">
  <link rel="icon" sizes="any" href="{{ asset_url('images/favicon.svg') }}" type="image/svg+xml">
  <link rel="mask-icon" href="{{ asset_url('images/govuk-icon-mask.svg') }}" color="{{'#1d70b8' if govukRebrand else '#0b0c0c'}}">
  <link rel="apple-touch-icon" href="{{ asset_url('images/govuk-icon-180.png') }}">
  <link rel="manifest" href="{{ asset_url('manifest.json') }}">
{% endblock %}

{% block head %}
  {%- for font in font_paths %}
  <link rel="preload" href="{{ asset_url(font, with_querystring_hash=False) }}" as="font" type="font/woff2" crossorigin>
  {%- endfor %}
  <link rel="stylesheet" media="screen" href="{{ asset_url('stylesheets/main.css') }}" />
  <link rel="stylesheet" media="print" href="{{ asset_url('stylesheets/print.css') }}" />
  {% block extra_stylesheets %}
  {% endblock %}
  {% if g.hide_from_search_engines %}
    <meta name="robots" content="noindex" />
  {% endif %}
  <meta name="google-site-verification" content="niWnSqImOWz6mVQTYqNb5tFK8HaKSB4b3ED4Z9gtUQ0" />
  {% block meta_format_detection %}
    <meta name="format-detection" content="telephone=no">
  {% endblock %}
  {% block meta %}
  {% endblock %}
{% endblock %}

{% set _per_page_title %}
  {% block per_page_title %}Document Download{% endblock %}
{% endset %}

{% block pageTitle %}
  {% block errorPrefix %}{% if form and form.errors %}Error: {% endif %}{% endblock %}
  {{ _per_page_title }} â€“ GOV.UK
{% endblock %}

{% block header %}
  {{ govukHeader({
    "homepageUrl": "https://www.gov.uk",
    "assetsPath": asset_path + "images",
    "rebrand": govukRebrand,
    "navigation": [],
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {% call govukNotificationBanner({
        "titleText": "Preview"
      }) %}
        <p class="govuk-notification-banner__heading">
          This is a preview of the page your recipients will see
        </p>
        <p class="govuk-body">
          To change or remove the file, <a class="govuk-link govuk-link--no-visited-state" href="{{ url_for("main.view_template", service_id=current_service.id, template_id=template.id) }}">edit the email template</a>.
        </p>
        {% block extra_banner_content %}{% endblock %}
      {% endcall %}
      <h1 class="govuk-heading-l">{{ _per_page_title }}</h1>
      {% block main_content %}{% endblock %}
    </div>
  </div>
{% endblock %}

{% block footer %}
  {{ govukFooter({
    "rebrand": govukRebrand,
    "navigation": []
  }) }}
{% endblock %}
