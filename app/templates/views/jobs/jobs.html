{% extends "withnav_template.html" %}
{% from "components/table.html" import list_table, field, right_aligned_field_heading %}

{% block page_title %}
  Notifications activity – GOV.UK Notify
{% endblock %}

{% block maincolumn_content %}

    <h1 class="heading-large">Notifications activity</h1>
    <p>
      <a href="{{ url_for(".view_notifications", service_id=current_service.id, job_id=job_id, page=1) }}">All messages</a>
    </p>
    <p>
      <a href="{{ url_for(".view_notifications", service_id=current_service.id, job_id=job_id, type="sms", page=1) }}">Text messages</a>&emsp;
      <a href="{{ url_for(".view_notifications", service_id=current_service.id, job_id=job_id, type="email", page=1) }}">Email messages</a>
    </p>
    <p>
      <a href="{{ url_for(".view_notifications", service_id=current_service.id, job_id=job_id, status=['sent', 'delivered'], page=1) }}">Successful messages</a>&emsp;
      <a href="{{ url_for(".view_notifications", service_id=current_service.id, job_id=job_id, status=['failed', 'complaint', 'bounce'], page=1) }}">Failed messages</a>
    </p>
    {% call(item, row_number) list_table(
      jobs,
      caption="Recent activity",
      caption_visible=False,
      empty_message='You haven’t sent any notifications yet',
      field_headings=['Job', 'Time', right_aligned_field_heading('Status'), 'Created By']
    ) %}
      {% call field() %}
        <a href="{{ url_for('.view_job', service_id=current_service.id, job_id=item.id) }}">{{ item.original_file_name }}</a>
      {% endcall %}
      {% call field() %}
        {{ item.created_at | format_datetime}}
      {% endcall %}
      {% call field(align='right') %}
        {{ item.status }}
      {% endcall %}
      {% call field() %}
        {{ item.created_by.name }}
      {% endcall %}
    {% endcall %}


{% endblock %}
