{% extends "withnav_template.html" %}
{% from "components/yes-no.html" import yes_no %}
{% from "components/textbox.html" import textbox %}
{% from "components/page-footer.html" import page_footer %}

{% block page_title %}
Manage users â€“ GOV.UK Notify
{% endblock %}

{% block maincolumn_content %}

  <h1 class="heading-large">
    {{ user.name or user.email_localpart or "Add a new team member" }}
  </h1>

  <div class="grid-row">
    <form method="post" class="column-three-quarters">

      {{ textbox(form.email_address, hint='Email address must end in .gov.uk', width='1-1') }}

      <fieldset class='yes-no-wrapper'>
        <legend class='heading-small'>
          Permissions
        </legend>
        <span class="form-hint">All team members can see message history</span>
        {{ yes_no(form.send_messages.name, form.send_messages.label, form.send_messages.value) }}
        {{ yes_no(form.manage_service.name, form.manage_service.label, form.manage_service.value) }}
        {{ yes_no(form.manage_api_keys, form.manage_api_keys, form.manage_api_keys.value) }}
      </fieldset>

      {% if user %}
        {{ page_footer(
          'Save',
          delete_link=url_for('.delete_user', service_id=service_id, user_id=user_id),
          delete_link_text='Delete this account',
          back_link=url_for('.manage_users', service_id=service_id),
          back_link_text='Cancel'
        ) }}
      {% else %}
        {{ page_footer('Send invitation email') }}
      {% endif %}

    </form>
  </div>
{% endblock %}
