{% from "components/table.html" import list_table, field, right_aligned_field_heading, hidden_field_heading %}

{% call(item, row_number) list_table(
  jobs,
  caption="Recent batch jobs",
  empty_message='You havenâ€™t sent any batch messages yet',
  field_headings=['File', 'Started', right_aligned_field_heading('Rows')]
) %}
  {% call field() %}
    <a href="{{ url_for('.view_job', service_id=current_service.id, job_id=item.id) }}">{{ item.original_file_name }}</a>
    {{ item.created_at|format_datetime }}
  {% endcall %}
  {% call field() %}

  {% endcall %}
  {% call field(align='right') %}
    {{ item.notification_count }}
  {% endcall %}
{% endcall %}
{% if more_jobs_to_show %}
  {% if current_user.has_permissions(['send_texts', 'send_emails', 'send_letters']) %}
    <p class="table-show-more-link">
      <a href="{{ url_for('.view_jobs', service_id=current_service.id) }}">See all sent batch messages</a>
    </p>
  {% endif %}
{% endif %}
