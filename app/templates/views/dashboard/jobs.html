{% from "components/table.html" import list_table, field, right_aligned_field_heading, hidden_field_heading %}

{% call(item) list_table(
  jobs,
  caption="Recent batch jobs",
  empty_message='You havenâ€™t sent any text messages yet',
  field_headings=['File', 'Started', right_aligned_field_heading('Rows'), right_aligned_field_heading('Sent')]
) %}
  {% call field() %}
    <a href="{{ url_for('.view_job', service_id=service_id, job_id=item.id) }}">{{ item.original_file_name }}</a>
  {% endcall %}
  {% call field() %}
    {{ item.created_at|format_datetime }}
  {% endcall %}
  {% call field(align='right') %}
    {{ item.notification_count }}
  {% endcall %}
  {% call field(align='right') %}
    {{ item.notifications_sent }}
  {% endcall %}
{% endcall %}
{% if more_jobs_to_show %}
  {% if current_user.has_permissions(['send_texts', 'send_emails', 'send_letters']) %}
    <p class="table-show-more-link">
      <a href="{{ url_for('.view_jobs', service_id=service_id) }}">See all sent text messages</a>
    </p>
  {% endif %}
{% endif %}
